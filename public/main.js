!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(e,t){this.executor=e,this.context=t}return e.prototype.execute=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.executor.__execute(e,this.context)},e.prototype.map=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.executor.__map(e,this.context)},e.prototype.provideContext=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.executor).provideContext.apply(e,t)},e}();t.default=r},function(e,t,n){"use strict";t.__esModule=!0,t.ABORTED=Symbol("ABORTED");var r=function(){function e(e,t,n){var r=this;this.elementCb=t,this.errorCb=n,this.promises=e.map(function(e,t){return r.__chainPromise(e,t)}),this.children=[]}return e.prototype.element=function(t,n){var r=new e(this.promises,t,n);return this.children.push(r),r},e.prototype.error=function(e){return this.element(null,e)},e.prototype.introducePromise=function(e,t){var n=this.__chainPromise(e,t);this.promises[t]=n,this.children.forEach(function(e){return e.introducePromise(n,t)})},e.prototype.__chainPromise=function(e,t){var n=this;if(!e)return e;var r=this.elementCb?function(e){return n.elementCb(e,t)}:void 0,o=this.errorCb?function(e){return n.errorCb(e,t)}:void 0;return e.then(r,o)},e}(),o=function(){function e(e,t,n){this.allPromise=e,this.elementPromise=t,this.onAbort=n}return e.forExecutor=function(t){var n,o,i=new Promise(function(e,t){n=e,o=t}),u=null,s=new r([],void 0,void 0),a=new e(i,s,function(){u&&u()});return t({resolveAll:n,rejectAll:o,resolveElement:function(e,t){var n=Promise.resolve(e);s.introducePromise(n,t)},rejectElement:function(e,t){var n=Promise.reject(e);s.introducePromise(n,t)},setOnAbort:function(e){u=e}}),a},e.prototype.then=function(t,n){return new e(this.allPromise.then(t,n),this.elementPromise,this.onAbort)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(t){return new e(this.allPromise.finally(t),this.elementPromise,this.onAbort)},e.prototype.element=function(t,n){var r=this.elementPromise.element(t,n);return new e(this.allPromise,r,this.onAbort)},e.prototype.error=function(e){return this.element(null,e)},e.prototype.abort=function(){this.onAbort&&this.onAbort()},e}();t.default=o},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function s(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,s)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.__esModule=!0;var i=n(3),u=n(4),s=n(5),a={width:500,height:500,panX:1,panY:1,magnificationFactor:1};function c(e,t){var n=e.fromRow,r=e.toRow,o=e.buffer,i=t.width,u=t.magnificationFactor,s=t.panX,a=t.panY;function c(e,t,n){t/=100,n/=100;var r=(1-Math.abs(2*n-1))*t,o=r*(1-Math.abs(e/60%2-1)),i=n-r/2,u=0,s=0,a=0;return 0<=e&&e<60?(u=r,s=o,a=0):60<=e&&e<120?(u=o,s=r,a=0):120<=e&&e<180?(u=0,s=r,a=o):180<=e&&e<240?(u=0,s=o,a=r):240<=e&&e<300?(u=o,s=0,a=r):300<=e&&e<360&&(u=r,s=0,a=o),[u=Math.round(255*(u+i)),s=Math.round(255*(s+i)),a=Math.round(255*(a+i))]}var l=new Uint8Array(o),f=20;function h(e,t){for(var n=e/u-s,r=t/u-a,o=n,i=r,c=0;c<f;){var l=2*n*r;if((n=n*n-r*r+o)*n+(r=l+i)*r>16)break;++c}return c}for(var d=n;d<r;++d)for(var p=0;p<i;++p){for(var v=0,m=0;m<8;++m){v+=h(p+m/4,d+m/4)/8}var b=100*v/Math.sqrt(f),y=v<f?c(b,100,50):[0,0,0],w=y[0],x=y[1],_=y[2],g=4*(d*i+p);l[g]=w,l[g+1]=x,l[g+2]=_,l[g+3]=255}}function l(){var e=document.createElement("canvas");e.width=a.width,e.height=a.height,document.body.appendChild(e);var t=a.width*a.height*4;return[e,new SharedArrayBuffer(t)]}function f(e,t){var n=e.getContext("2d"),r=n.createImageData(a.width,a.height),o=new Uint8ClampedArray(t);r.data.set(o,0),n.putImageData(r,0,0)}function h(e,t){for(var n=a.height/e,r=[],o=0;o<e;++o)r.push({fromRow:o*n,toRow:(o+1)*n,buffer:t});return r}t.mandelbrot=c,t.mandelbrotSync=function(){return r(this,void 0,void 0,function(){var e,t,n,r;return o(this,function(o){switch(o.label){case 0:e=l(),t=e[0],n=e[1],r=!1,window.addEventListener("keyup",function(){r=!0}),o.label=1;case 1:return r?[3,3]:(a.magnificationFactor++,[4,new Promise(function(e){return setTimeout(e,16.5)})]);case 2:return o.sent(),c({fromRow:0,toRow:a.height,buffer:n},a),f(t,n),[3,1];case 3:return[2]}})})},t.mandelbrotIdleCallback=function(){return r(this,void 0,void 0,function(){function e(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,s.provideContext(a).map(c,d)];case 1:return e.sent(),f(n,i),[2]}})})}var t,n,i,s,d;return o(this,function(r){switch(r.label){case 0:t=l(),n=t[0],i=t[1],s=new u.default(0,0),d=h(10,i),r.label=1;case 1:return a.magnificationFactor++,[4,e()];case 2:return r.sent(),[3,1];case 3:return[2]}})})},t.mandelbrotPool=function(){return r(this,void 0,void 0,function(){function e(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){return e=h(4,u),[2,d.provideContext(a).map(s.transferFn(c),e).then(function(){f(n,u)})]})})}var t,n,u,d;return o(this,function(r){switch(r.label){case 0:t=l(),n=t[0],u=t[1],d=new i.default(4),r.label=1;case 1:return a.magnificationFactor++,[4,e()];case 2:return r.sent(),[3,1];case 3:return[2]}})})},t.mandelbrotPoolAnimationFrame=function(){return r(this,void 0,void 0,function(){function e(){return r(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return a.magnificationFactor++,t=h(4,u),[4,d.provideContext(a).map(s.transferFn(c),t).then(function(){f(n,u)})];case 1:return r.sent(),window.requestAnimationFrame(e),[2]}})})}var t,n,u,d;return o(this,function(r){return t=l(),n=t[0],u=t[1],d=new i.default(4),window.requestAnimationFrame(e),[2]})})},t.mandelbrotWorker=function(){return r(this,void 0,void 0,function(){function e(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){return e=h(1,u),[2,d.provideContext(a).map(s.transferFn(c),e).then(function(){f(n,u)})]})})}var t,n,u,d;return o(this,function(r){switch(r.label){case 0:t=l(),n=t[0],u=t[1],d=new i.default(1),r.label=1;case 1:return a.magnificationFactor++,[4,e()];case 2:return r.sent(),[3,1];case 3:return[2]}})})}},function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.__esModule=!0;var u=n(0),s=n(1),a=function(e){function t(t,n,r,o){var i=e.call(this,t)||this;return i.stack=r,i.kind=n,i.index=o,i}return o(t,e),t.fromMessage=function(e){return new t(e.message,e.kind,e.stack,e.index)},t}(Error);t.WorkerError=a;var c=function(){function e(e){for(var t=[],n=[],r=0;r<e;++r){var o=new Worker("/workerBridge.js");t.push(o),n.push([])}this.size=e,this.workers=t,this.contextRegister=n,this.workerSelector=function(e){var t;return i(this,function(n){switch(n.label){case 0:t=0,n.label=1;case 1:return[4,t%e.length];case 2:n.sent(),n.label=3;case 3:return++t,[3,1];case 4:return[2]}})}(t),this.contextCounter=0}return e.prototype.createContext=function(e,t){return{id:++this.contextCounter,value:e,transferList:t}},e.prototype.ensureContext=function(e,t){if(!(this.contextRegister[t].indexOf(e.id)>-1)){var n={cmd:"sendContext",id:e.id,value:e.value};this.workers[t].postMessage(n,e.transferList)}},e.prototype.nextWorkerId=function(){return this.workerSelector.next().value},e}();function l(e){return"transfer"===e.$$exec_type?{$$exec_type:"transfer",fn:e.fn.toString()}:e}var f=function(){function e(e,t,n,r,o){this.pool=e,this.fnDescriptor=t,this.data=n,this.context=r,this.transferList=o}return e.prototype.start=function(){var e=this,t=this.pool.nextWorkerId(),n=this.pool.workers[t],r=new MessageChannel,o=r.port1,i=r.port2,u=this.transferList?this.transferList.concat(i):[i];return s.default.forExecutor(function(r){var c=r.resolveAll,f=r.rejectAll,h=r.resolveElement,d=r.rejectElement,p=r.setOnAbort;o.addEventListener("messageerror",function(e){f(e),o.close()}),o.addEventListener("message",function(e){var t=e.data;switch(t.cmd){case"result":"number"==typeof t.index?h(t.value,t.index):(c(t.value),o.close());break;case"error":var n=a.fromMessage(t);"number"==typeof t.index?d(n,t.index):(f(n),o.close())}});var v={cmd:"execute",port:i,fn:l(e.fnDescriptor),data:e.data};e.context&&(e.pool.ensureContext(e.context,t),v.contextId=e.context.id),n.postMessage(v,u);p(function(){o.close(),f(s.ABORTED)})})},e}(),h=function(){function e(e,t,n,r,o){this.pool=e,this.fnDescriptor=t,this.elements=n,this.context=r,this.transferList=o,this.sessions=new Array(this.pool.workers.length),this.isAborted=!1}return e.prototype.__nextWorkerSession=function(e,t){var n=this,r=this.pool.nextWorkerId();if(this.sessions[r])return this.sessions[r];var o=new MessageChannel,i={execPort:o.port1,workerPort:o.port2};this.sessions[r]=i,i.execPort.addEventListener("message",function(r){var o=r.data;if(!n.isAborted)switch(o.cmd){case"result":e(o.value,o.index);break;case"error":var i=a.fromMessage(o);t(i,o.index)}}),i.execPort.start();var u={cmd:"map",fn:l(this.fnDescriptor),port:i.workerPort};return this.context&&(this.pool.ensureContext(this.context,r),u.contextId=this.context.id),this.pool.workers[r].postMessage(u,[i.workerPort]),i},e.prototype.start=function(){var e=this;return s.default.forExecutor(function(t){var n=t.resolveAll,r=t.rejectAll,o=t.resolveElement,i=t.rejectElement,u=t.setOnAbort,a=0,c=new Array(e.elements.length),l=null;u(function(){e.isAborted=!0,e.sessions.forEach(function(e){e.execPort.close()}),r(s.ABORTED)});var f=function(){++a>=e.elements.length&&(Promise.resolve().then(function(){l?r(l):n(c)}),e.sessions.forEach(function(e){return e.execPort.close()}))},h=function(e,t){c[t]=e,o(e,t),f()},d=function(e,t){c[t]=null,l||(l=e),i(e,t),f()};e.elements.forEach(function(t,n){var r={cmd:"mapElement",element:t,index:n};e.__nextWorkerSession(h,d).execPort.postMessage(r,e.transferList)})})},e}(),d=function(){function e(e){this.pool=new c(e)}return e.prototype.importFunction=function(e,t){var n={cmd:"importFunction",path:e,fnNames:t};return this.pool.workers.forEach(function(e){return e.postMessage(n)}),this},e.prototype.provideContext=function(e,t){var n=this.pool.createContext(e,t);return new u.default(this,n)},e.prototype.execute=function(e,t,n){return void 0===n&&(n=void 0),this.__execute([e,t,n],void 0)},e.prototype.__execute=function(e,t){var n=e[0],r=e[1],o=e[2];return new f(this.pool,n,r,t,o).start()},e.prototype.map=function(e,t,n){return void 0===n&&(n=void 0),this.__map([e,t,n],void 0)},e.prototype.__map=function(e,t){var n=e[0],r=e[1],o=e[2];return new h(this.pool,n,r,t,o).start()},e}();t.default=d},function(e,t,n){"use strict";t.__esModule=!0;var r=n(1),o=n(0),i=function(){function e(e,t){void 0===t&&(t=void 0),this.queue=new u(e,t),this.contextCounter=0}return e.prototype.provideContext=function(e){var t={id:this.contextCounter++,value:e};return new o.default(this,t)},e.prototype.execute=function(e,t){return this.__execute([e,t],void 0)},e.prototype.__execute=function(e,t){var n=this,o=e[0],i=e[1];return r.default.forExecutor(function(e){var u={fn:o,data:i,context:t?t.value:void 0,isAborted:!1,onElement:function(t,n){null===n?e.resolveAll(t):e.resolveElement(t,n)},onError:function(t){return e.rejectAll(t)}};n.queue.submit(u),e.setOnAbort(function(){u.isAborted=!0,n.queue.clearAborted(),e.rejectAll(r.ABORTED)})})},e.prototype.map=function(e,t){return this.__map([e,t],void 0)},e.prototype.__map=function(e,t){var n=this,o=e[0],i=e[1];return r.default.forExecutor(function(e){var u=new Array(i.length),s=0,a=function(){++s>=i.length&&Promise.resolve().then(function(){e.resolveAll(u)})},c=i.map(function(n,r){return{fn:o,data:n,context:t?t.value:void 0,index:r,isAborted:!1,onElement:function(t,n){null===n&&(e.resolveElement(t,r),u[r]=t,a())},onError:function(t){e.rejectElement(t,r),u[r]=null,a()}}});c.forEach(function(e){return n.queue.submit(e)});e.setOnAbort(function(){c.forEach(function(e){e.isAborted=!0}),n.queue.clearAborted(),e.rejectAll(r.ABORTED)})})},e}();t.default=i;var u=function(){function e(e,t){void 0===t&&(t=null),this.threshold=e,this.timeout=t,this.queue=[],this.isCallbackScheduled=!1,this.asyncSessionQueue=[],this.currentSession=null,this.__handleIdleCallback=this.__handleIdleCallback.bind(this)}return e.prototype.submit=function(e){this.queue.push(e),this.isCallbackScheduled||(window.requestIdleCallback(this.__handleIdleCallback),this.isCallbackScheduled=!0)},e.prototype.clearAborted=function(){for(var e=this.queue.length-1;e>=0;--e)this.queue[e].isAborted&&this.queue.splice(e,1)},e.prototype.__processElement=function(e){try{var t=e.fn(e.data,e.context);return t&&(t[Symbol.iterator]||t[Symbol.asyncIterator])?{element:e,iterator:t,iterIndex:0}:(Promise.resolve(t).then(function(t){return!e.isAborted&&e.onElement(t,null)},function(t){return!e.isAborted&&e.onError(t)}),null)}catch(t){e.onError(t)}},e.prototype.__processSessionIteration=function(e){var t=this;e.element.isAborted&&e.iterator.return();try{var n=e.iterator.next();if("function"==typeof n.then)return n.then(function(n){e.element.isAborted||(n.done?e.element.onElement(n.value,null):(e.element.onElement(n.value,e.iterIndex),e.iterIndex++,t.asyncSessionQueue.push(e),t.isCallbackScheduled||(window.requestIdleCallback(t.__handleIdleCallback,{timeout:t.timeout}),t.isCallbackScheduled=!0)))},function(t){!e.element.isAborted&&e.element.onError(t)}),!0;var r=n;return r.done?(e.element.onElement(r.value,null),!0):(e.element.onElement(r.value,e.iterIndex),e.iterIndex++,!1)}catch(t){return e.element.onError(t),!0}},e.prototype.__handleIdleCallback=function(e){for(;e.timeRemaining()>this.threshold;){if(null===this.currentSession)if(this.asyncSessionQueue.length>0){var t=this.asyncSessionQueue.shift();this.__processSessionIteration(t)||(this.currentSession=t)}else{if(this.queue.length<1)return void(this.isCallbackScheduled=!1);var n=this.queue.shift();if(!n.isAborted){var r=this.__processElement(n);r&&(this.currentSession=this.__processSessionIteration(r)?null:r)}}else this.__processSessionIteration(this.currentSession)&&(this.currentSession=null)}this.queue.length>0||this.currentSession||this.asyncSessionQueue.length>0?window.requestIdleCallback(this.__handleIdleCallback,{timeout:this.timeout}):this.isCallbackScheduled=!1},e}()},function(e,t,n){"use strict";t.__esModule=!0,t.transferFn=function(e){return{$$exec_type:"transfer",fn:e}},t.loadFn=function(e,t){return{$$exec_type:"load",path:e,name:t}},t.refFn=function(e){return{$$exec_type:"ref",name:e}}},,function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),o=n(8);!function(){var e=document.createElement("div");e.style.backgroundColor="#f00",e.style.position="absolute",e.style.width="50px",e.style.height="50px",e.style.border="1px solid green",document.body.appendChild(e);var t=0,n=0,r=function(){t+=5,n+=5,e.style.top=t%window.innerHeight+"px",e.style.left=n%window.innerWidth+"px",window.requestAnimationFrame(r)};window.requestAnimationFrame(r)}();var i=document.createElement("div");function u(e){var t=document.createElement("button");return t.innerText=e,i.appendChild(t),t}document.body.appendChild(i),u("Sync setTimeout").addEventListener("click",function(){return r.mandelbrotSync()}),u("Idle Callback").addEventListener("click",function(){return r.mandelbrotIdleCallback()}),u("Single Worker").addEventListener("click",function(){return r.mandelbrotWorker()}),u("Worker Pool").addEventListener("click",function(){return r.mandelbrotPool()}),u("Pool Animation Frame").addEventListener("click",function(){return r.mandelbrotPoolAnimationFrame()}),u("Vanilla Worker Pool").addEventListener("click",function(){return o.mandelbrotVanillaPool()})},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function u(e){try{a(r.next(e))}catch(e){i(e)}}function s(e){try{a(r.throw(e))}catch(e){i(e)}}function a(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(u,s)}a((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;u;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,r=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=t.call(e,u)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};t.__esModule=!0;var i={width:500,height:500,panX:1,panY:1,magnificationFactor:1};t.mandelbrotVanillaPool=function(){return r(this,void 0,void 0,function(){function e(){return r(this,void 0,void 0,function(){return o(this,function(e){return[2,new Promise(function(e){for(var r=function(e,t){for(var n=i.height/e,r=[],o=0;o<e;++o)r.push({fromRow:o*n,toRow:(o+1)*n,buffer:t});return r}(t,c),o=0,u=function(r){r.data.done&&++o>=t&&(n.forEach(function(e){return e.removeEventListener("message",u)}),e(c))};0<n.length;0){var s=n[0];s.addEventListener("message",u);var a={context:i,slice:r[0]};s.postMessage(a)}}).then(function(){return function(e,t){var n=e.getContext("2d"),r=n.createImageData(i.width,i.height),o=new Uint8ClampedArray(t);r.data.set(o,0),n.putImageData(r,0,0)}(a,c)})]})})}var t,n,u,s,a,c;return o(this,function(r){switch(r.label){case 0:for(t=4,n=[],u=0;u<t;++u)n.push(new Worker("/vanilla-worker.js"));s=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height,document.body.appendChild(e);var t=i.width*i.height*4;return[e,new SharedArrayBuffer(t)]}(),a=s[0],c=s[1],r.label=1;case 1:return i.magnificationFactor++,[4,e()];case 2:return r.sent(),[3,1];case 3:return[2]}})})}}]);